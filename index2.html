<!DOCTYPE html>
<html>

<head>
	<title>Layout</title>
	<link rel="stylesheet" type="text/css" href="/css/main2.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/base-min.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">
    <meta name="description" content="Interactively view x, y slices through my_graphs and contour plots online with Plotly.">
</head>

<body>
<div id="container">

	<h1>Quantifying Forebrain Development</h1>

	<div id="nav">
		<div id="navhead">Navigation</div>
		<div id="links">
			<a href="#s1" class="navlink">Section 1</a> <br>
			<a href="#s2" class="navlink">Section 2</a>
		</div>	
	</div>

	<div class="section">
		<h2 class="question" id="s1">Introduction</h2>
		<div class="box2">
			<h3>Commissures</h3>
			<img src="wt.jpg" alt="Wildtype Embryo">
		</div>
		<div class="box2">
			<h3>Quantifying biological structures</h3>
			<!-- <p>Wt at/gfap 3d plot with model</p> -->
			<!-- <iframe id="wt3d" width="400" height="400" frameborder="0" scrolling="no" src="//plot.ly/~msschwartz21/126.embed"></iframe> -->
		</div>
		<h2 class='answer'>Answer</h2>
	</div>

	<div class="section">
		<h2 class="question" id="s2">Interaction between AT and Gfap</h2>
		
		<div class="box2">
			<h3>Distribution of axon signal</h3>
			<!-- <p>wt at theta heatmap</p> -->
			<iframe id="wtat" width="450" height="400" frameborder="0" scrolling="no" src="//plot.ly/~msschwartz21/116.embed"></iframe>
		</div>

		<div class="box2" id='third'>
			<h3>Distribution of Gfap signal</h3>
			<!-- <p>wt gfap theta heatmap</p> -->
			<!-- <iframe id="wtzrf" width="450" height="400" frameborder="0" scrolling="no" src="//plot.ly/~msschwartz21/118.embed" seamless></iframe> -->
		</div>

		<div id="imgbox">
			<img src="wt.jpg" alt="Wildtype Embryo">
		</div>

		<h2 class='answer'>Answer</h2>
	</div>

	<div class="section">
		<h2 class="question">Failures to form commissures</h2>
		<div class="box2">
			<h3>WT commissure</h3>
			<img src="wt.jpg" alt="Wildtype Embryo">
			<!-- <p>WT basic image</p> -->
		</div>
		<div class="box2">
			<h3>Yot commissure</h3>
			<img src="yot.jpg" alt="Mutant Embryo">
			<!-- <p>Yot basic image</p> -->
		</div>
		<div class="box2">
			<h3>WT in three dimensions</h3>
			<!-- <p>WT 3D scatter plot</p> -->
			<!-- <iframe id="wt3d2" width="400" height="400" frameborder="0" scrolling="no" src="//plot.ly/~msschwartz21/126.embed"></iframe> -->
		</div>
		<div class="box2">
			<h3>Yot in three dimensions</h3>
			<!-- <p>Yot 3D scatter plot</p> -->
			<!-- <iframe id="yot3d" width="400" height="400" frameborder="0" scrolling="no" src="//plot.ly/~msschwartz21/128.embed"></iframe> -->
		</div>
	</div>

	<div class="section">
		<h2 class="question">What happens in the Yot mutant?</h2>
		<div class="box2">
			<h3>WT AT</h3>
			<!-- <p>wt at theta heatmap</p> -->
			<!-- <iframe id="wtat2" width="400" height="400" frameborder="0" scrolling="no" src="//plot.ly/~msschwartz21/116.embed"></iframe> -->
		</div>
		<div class="box2">
			<h3>WT Gfap</h3>
			<!-- <p>wt gfap theta heatmap</p> -->
			<!-- <iframe id="wtzrf2" width="400" height="400" frameborder="0" scrolling="no" src="//plot.ly/~msschwartz21/118.embed"></iframe> -->
		</div>
		<div class="box2">
			<h3>Yot AT</h3>
			<!-- <p>yot at theta heatmap</p> -->
			<!-- <iframe id="yotat" width="400" height="400" frameborder="0" scrolling="no" src="//plot.ly/~msschwartz21/122.embed"></iframe> -->
		</div>
		<div class="box2">
			<h3>Yot Gfap</h3>
			<!-- <p>yot gfap theta heatmap</p> -->
			<!-- <iframe id="yotzrf" width="400" height="400" frameborder="0" scrolling="no" src="//plot.ly/~msschwartz21/120.embed"></iframe> -->
		</div>
	</div>
	

</div>

<script src="https://d3js.org/d3.v3.min.js"></script>
<script src='main.js'></script>
<script src="//code.jquery.com/jquery-1.10.2.js"></script>

<script type="text/javascript">

//Read data in
// var wtatdata;
// var file = d3.json('atwt_theta_hm.json',function(error,root) {
// 	console.log(root);
// 	wtatdata = root;
// });
// console.log(wtatdata);
var wtatdata;
$.getJSON('atwt.json')
	.done(function(json) {
		console.log('json data: '+json);
		wtatdata = json;
	})
	.fail(function(jqxhr, textStatus, error) {
		var err = textStatus + "," + error;
		console.log("Request Failed: "+err);
	});

//Set up graphs and event listener
var graphs = {};

$('iframe').each(function(i, obj){
	graphs[obj.id] = init_graph_obj(obj.id);
});

console.log(graphs)

window.addEventListener('message', function(e){
	var message = e.data;
	var graph;

	//Figure out which graph the message came from
	for(var i in graphs) {
		if(graphs[i].graphContentWindow === e.source) {
			graph = graphs[i];
		}
	}
	if(typeof graph === "undefined") {
		return;
	}

	var pinger = graph.pinger;
	var graphContentWindow = graph.graphContentWindow;
	var id = graph.id;

	if('pong' in message && message.pong) {
		clearInterval(pinger);
		graphContentWindow.postMessage({
			'task': 'listen',
			'events': ['click', 'hover', 'zoom']
		}, 'https://plot.ly');
	} else if (message.type==='hover' ||
				message.type==='zoom' ||
				message.type==='click') {
		console.log(id, '-->', message);
	}

	//Show hover tag for second graph if first activated
	if(graph.id==='theta' && message.type==='hover') {
		coordinate_hover(graphs['theta2'],message);
	}

	//Show hover tag for first graph if second activated
	if(graph.id==='theta2' && message.type==='hover') {
		coordinate_hover(graphs['theta'],message);
	}

	//Coordinate zoom
	if(graph.id==='theta' && message.type==='zoom') {
		update_theta_zoom(graphs['theta2'],message);
	}

	//Coordinate zoom
	if(graph.id==='theta2' && message.type==='zoom') {
		update_theta_zoom(graphs['theta'],message);
	}

	//Change image on click
	if(message.type==='click') {
		show_image(wtatdata,message);
	}
});

</script>

</body>

</html>